<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐</title>
    <style>
        #header {
            height: 20px;
            background-color: cornflowerblue;
            text-align: center;
        }
        #content {
            height: calc(100vh - 130px); /* 减去头部和底部的高度 */
            overflow-y: auto;
            padding: 10px;
        }
        #footer {
            height: 50px;
            background-color: cornflowerblue;
        }
        .ellipsis {
            /* 设置宽度，如果需要的话（也可以不设置，让元素自然流动） */
            /* width: 100%; 或其他具体值 */
            top: 80%;
            text-align: center;
            white-space: nowrap; /* 防止文本换行 */
            overflow: hidden; /* 隐藏超出容器的部分 */
            text-overflow: ellipsis; /* 用省略号表示被截断的文本 */
        }
    </style>
</head>
<body>
<div id="header">音乐播放器</div>
<div id="content">
    <iframe src="author.html" width="100%" height="100%" style="border: none;"></iframe>
</div>


<div id="music-player" style="text-align: center">
    <audio id="audio-player" controls></audio>
    <div id="newPlay" style="color: cadetblue ;font-size: 10px" class="ellipsis">
        正在播放：
    </div>
</div>

<script>
    var audioFiles = [];
    var currentIndex = 0;

    // 播放歌曲
    function playSong(url,title,dataList) {
        var index = 0
        for (var i = 0; i < dataList.length; i++){
            index ++ ;
            if (dataList[i].url === url){
                currentIndex =index
                break
            }
        }
        const audioPlayer = document.getElementById('audio-player');
        audioPlayer.src = url; // 设置音频文件的URL
        audioPlayer.play(); // 播放音频
        const newPlay = document.getElementById('newPlay');
        var text = "正在播放："+"  "+currentIndex+"  "+title
        newPlay.textContent = text;
        currentIndex = currentIndex - 1;
        audioFiles = dataList;
    }

    function playAudio(index) {
        var audio = document.getElementById('audio-player');
        audio.src = audioFiles[index].url;
        audio.load();
        audio.play();
    }

    function playNext() {
        currentIndex++;
        if (currentIndex >= audioFiles.length) {
            currentIndex = 0; // 如果到达列表末尾，从头开始
        }
        playAudio(currentIndex);
    }

    // 页面加载时自动播放第一曲
    window.onload = function() {
        // 为音频元素添加ended事件监听器，以便在音频结束时自动播放下一曲
        var audio = document.getElementById('audio-player');
        audio.addEventListener('ended', function() {
            playNext();
        });
    };


</script>
</body>
</html>